# Supervisor configuration for Trading Oracle
# Place in: /etc/supervisor/conf.d/trading-oracle.conf

[program:trading_oracle_gunicorn]
command=/home/oracle/trading-oracle/venv/bin/gunicorn trading_oracle.wsgi:application -c /home/oracle/trading-oracle/deploy/gunicorn_config.py
directory=/home/oracle/trading-oracle
user=oracle
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/trading-oracle/gunicorn.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=PATH="/home/oracle/trading-oracle/venv/bin"

[program:trading_oracle_celery_worker]
command=/home/oracle/trading-oracle/venv/bin/celery -A trading_oracle worker -l info
directory=/home/oracle/trading-oracle
user=oracle
numprocs=1
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=600
stopasgroup=true
killasgroup=true
redirect_stderr=true
stdout_logfile=/var/log/trading-oracle/celery-worker.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=PATH="/home/oracle/trading-oracle/venv/bin"

[program:trading_oracle_celery_beat]
command=/home/oracle/trading-oracle/venv/bin/celery -A trading_oracle beat -l info
directory=/home/oracle/trading-oracle
user=oracle
numprocs=1
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=600
redirect_stderr=true
stdout_logfile=/var/log/trading-oracle/celery-beat.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=PATH="/home/oracle/trading-oracle/venv/bin"

[group:trading_oracle]
programs=trading_oracle_gunicorn,trading_oracle_celery_worker,trading_oracle_celery_beat
priority=999
